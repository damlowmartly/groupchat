<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Hato & Jbro Messenger</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <!-- ============================================ -->
  <!-- LOGIN SCREEN -->
  <!-- ============================================ -->
  <div id="login-screen">
    <div class="login-container">
      <h1>ğŸ’¬ Hato & Jbro Messenger</h1>
      <p>Private workspace for two</p>
      
      <form id="login-form">
        <div class="form-group">
          <label for="username">Username</label>
          <select id="username" required>
            <option value="">Select user...</option>
            <option value="Hato">Hato</option>
            <option value="Jbro">Jbro</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" placeholder="Enter password" required>
        </div>
        
        <button type="submit" class="btn-primary">Login</button>
        <div id="login-error" class="error-message"></div>
      </form>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- MESSENGER INTERFACE -->
  <!-- ============================================ -->
  <div id="messenger" class="hidden">
    
    <!-- Top Header Bar -->
    <header class="messenger-header">
      <div class="header-left">
        <div class="online-indicator">
          <span class="status-dot" id="status-dot"></span>
          <span id="partner-name">Waiting...</span>
        </div>
      </div>
      <div class="header-center">
        <h1>ğŸ’¬ Messenger</h1>
      </div>
      <div class="header-right">
        <button class="icon-btn" id="menu-btn" title="Menu">â˜°</button>
      </div>
    </header>

    <!-- Messages Container -->
    <main class="messages-area" id="messages-area">
      <div class="date-divider">
        <span id="current-date">Today</span>
      </div>
      <!-- Messages will be added here dynamically -->
    </main>

    <!-- Quick Actions Bar (Above Input) -->
    <div class="quick-actions">
      <button class="quick-btn" data-action="reminder" title="Set Reminder">â°</button>
      <button class="quick-btn" data-action="todo" title="Add To-Do">âœ…</button>
      <button class="quick-btn" data-action="note" title="Save Note">ğŸ“</button>
      <button class="quick-btn" data-action="poll" title="Quick Poll">ğŸ“Š</button>
      <button class="quick-btn" data-action="important" title="Important Message">â­</button>
    </div>

    <!-- Message Input Bar -->
    <footer class="message-input-container">
      <button class="icon-btn" id="attach-btn" title="Attach">ğŸ“</button>
      <input 
        type="text" 
        id="message-input" 
        placeholder="Type a message..." 
        autocomplete="off"
      >
      <button class="icon-btn send-btn" id="send-btn" title="Send">
        <span class="send-icon">â¤</span>
      </button>
    </footer>

  </div>

  <!-- ============================================ -->
  <!-- SIDE MENU -->
  <!-- ============================================ -->
  <div id="side-menu" class="side-menu hidden">
    <div class="menu-header">
      <h2>Menu</h2>
      <button class="close-btn" id="close-menu">âœ•</button>
    </div>
    
    <div class="menu-content">
      <!-- User Info -->
      <div class="menu-section">
        <div class="user-info">
          <div class="user-avatar">
            <span id="user-avatar-text">H</span>
          </div>
          <div>
            <div class="user-name" id="current-user-display">Hato</div>
            <div class="user-status">Online</div>
          </div>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="menu-section">
        <h3>Session Stats</h3>
        <div class="stat-item">
          <span>Messages:</span>
          <strong id="stat-messages">0</strong>
        </div>
        <div class="stat-item">
          <span>To-Dos:</span>
          <strong id="stat-todos">0</strong>
        </div>
        <div class="stat-item">
          <span>Reminders:</span>
          <strong id="stat-reminders">0</strong>
        </div>
      </div>

      <!-- Saved Items -->
      <div class="menu-section">
        <h3>ğŸ“Œ Saved Items</h3>
        <div id="saved-items-list" class="saved-items-list">
          <p class="empty-state">No saved items yet</p>
        </div>
      </div>

      <!-- Email Notes -->
      <div class="menu-section">
        <h3>ğŸ“§ Email Notes</h3>
        <button class="menu-action-btn" id="email-notes-btn">
          Send Notes via Email
        </button>
        <div id="email-status-menu" class="email-status-small"></div>
      </div>

      <!-- Actions -->
      <div class="menu-section">
        <button class="menu-action-btn secondary" id="clear-chat-btn">
          ğŸ—‘ Clear Chat History
        </button>
        <button class="menu-action-btn danger" id="logout-btn">
          ğŸšª Logout
        </button>
      </div>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- MODALS -->
  <!-- ============================================ -->
  
  <!-- Reminder Modal -->
  <div id="reminder-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>â° Set Reminder</h3>
        <button class="close-btn modal-close">âœ•</button>
      </div>
      <div class="modal-body">
        <input type="text" id="reminder-text" placeholder="What to remind?" class="modal-input">
        <input type="datetime-local" id="reminder-time" class="modal-input">
      </div>
      <div class="modal-footer">
        <button class="btn-secondary modal-close">Cancel</button>
        <button class="btn-primary" id="save-reminder-btn">Save Reminder</button>
      </div>
    </div>
  </div>

  <!-- To-Do Modal -->
  <div id="todo-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>âœ… Add To-Do</h3>
        <button class="close-btn modal-close">âœ•</button>
      </div>
      <div class="modal-body">
        <input type="text" id="todo-text" placeholder="What needs to be done?" class="modal-input">
        <label class="checkbox-label">
          <input type="checkbox" id="todo-urgent"> Mark as urgent
        </label>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary modal-close">Cancel</button>
        <button class="btn-primary" id="save-todo-btn">Add To-Do</button>
      </div>
    </div>
  </div>

  <!-- Note Modal -->
  <div id="note-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ“ Save Note</h3>
        <button class="close-btn modal-close">âœ•</button>
      </div>
      <div class="modal-body">
        <textarea id="note-text" placeholder="Write your note..." class="modal-textarea" rows="6"></textarea>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary modal-close">Cancel</button>
        <button class="btn-primary" id="save-note-btn">Save Note</button>
      </div>
    </div>
  </div>

  <!-- Poll Modal -->
  <div id="poll-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ“Š Quick Poll</h3>
        <button class="close-btn modal-close">âœ•</button>
      </div>
      <div class="modal-body">
        <input type="text" id="poll-question" placeholder="Ask a question..." class="modal-input">
        <input type="text" id="poll-option1" placeholder="Option 1" class="modal-input">
        <input type="text" id="poll-option2" placeholder="Option 2" class="modal-input">
      </div>
      <div class="modal-footer">
        <button class="btn-secondary modal-close">Cancel</button>
        <button class="btn-primary" id="send-poll-btn">Send Poll</button>
      </div>
    </div>
  </div>

  <!-- Email Modal -->
  <div id="email-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ“§ Send Notes via Email</h3>
        <button class="close-btn modal-close">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Send all your saved notes and important messages to your email.</p>
        
        <label>Your Email Address:</label>
        <input type="email" id="email-address" placeholder="your@email.com" class="modal-input">
        
        <label>Formspree Form ID:</label>
        <input type="text" id="formspree-id" placeholder="e.g., xwkdjane" class="modal-input">
        <small class="form-hint">Get your form ID from <a href="https://formspree.io" target="_blank">formspree.io</a></small>
        
        <div id="email-preview" class="email-preview">
          <strong>Preview:</strong>
          <div id="email-content-preview"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary modal-close">Cancel</button>
        <button class="btn-primary" id="send-email-btn">Send Email</button>
      </div>
      <div id="email-status" class="email-status"></div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
